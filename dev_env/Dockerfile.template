FROM simonsdave/xenial-dev-env:%DEV_ENV_VERSION%

LABEL maintainer="Dave Simons"

ARG PACKAGE

ENV DEBIAN_FRONTEND noninteractive

RUN mkdir /tmp/$PACKAGE
ADD package.tar /tmp/$PACKAGE/.

RUN /tmp/$PACKAGE/bin/install_chrome.sh
RUN /tmp/$PACKAGE/bin/install_chromedriver.sh
RUN cd /tmp/$PACKAGE && pip install --requirement "requirements.txt"

RUN rm -rf "/tmp/$PACKAGE"

ENV DEBIAN_FRONTEND newt
